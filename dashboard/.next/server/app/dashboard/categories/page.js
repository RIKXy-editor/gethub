(()=>{var e={};e.id=823,e.ids=[823],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},8762:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>o}),t(6260),t(3321),t(1),t(5866);var r=t(3191),a=t(8716),i=t(7922),l=t.n(i),n=t(5231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let o=["",{children:["dashboard",{children:["categories",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6260)),"/home/runner/workspace/dashboard/app/dashboard/categories/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,3321)),"/home/runner/workspace/dashboard/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,1)),"/home/runner/workspace/dashboard/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/home/runner/workspace/dashboard/app/dashboard/categories/page.tsx"],u="/dashboard/categories/page",x={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/categories/page",pathname:"/dashboard/categories",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},341:(e,s,t)=>{Promise.resolve().then(t.bind(t,3543))},3543:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var r=t(326),a=t(7577),i=t(4976),l=t(108),n=t(119),c=t(3071),o=t(772),d=t(4432),u=t(1048),x=t(3261),p=t(567),h=t(2288),m=t(6824),g=t(6205),j=t(4215),v=t(3855),y=t(1215);let f=(0,t(2881).Z)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var N=t(8091),C=t(5265);let k={id:"",name:"",emoji:"\uD83C\uDFAB",description:"",supportRoles:[],maxTickets:1,autoCloseHours:0,active:!0};function b(){let{selectedGuildId:e}=(0,g.f)(),s=(0,i.NL)(),[t,b]=(0,a.useState)([]),[q,_]=(0,a.useState)(null),[w,P]=(0,a.useState)(!1),{data:M,isLoading:Z}=(0,l.a)({queryKey:["categories",e],queryFn:()=>m.x.getCategories(e),enabled:!!e}),{data:A}=(0,l.a)({queryKey:["roles",e],queryFn:()=>m.x.getRoles(e),enabled:!!e}),z=(0,n.D)({mutationFn:()=>m.x.updateCategories(e,t),onSuccess:()=>{(0,j.Am)({title:"Success",description:"Categories saved!"}),s.invalidateQueries({queryKey:["categories",e]})},onError:()=>{(0,j.Am)({title:"Error",description:"Failed to save categories",variant:"destructive"})}}),S=()=>{_({...k,id:`cat_${Date.now()}`}),P(!0)},D=e=>{_({...e}),P(!0)},E=e=>{b(t.filter(s=>s.id!==e))},I=e=>{b(t.map(s=>s.id===e?{...s,active:!s.active}:s))};return e?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Categories & Roles"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage ticket categories and their support roles"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(o.z,{onClick:S,children:[r.jsx(v.Z,{className:"mr-2 h-4 w-4"}),"Add Category"]}),(0,r.jsxs)(o.z,{onClick:()=>z.mutate(),disabled:z.isPending,children:[r.jsx(y.Z,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[t.map(e=>(0,r.jsxs)(c.Zb,{className:e.active?"":"opacity-60",children:[(0,r.jsxs)(c.Ol,{className:"pb-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(c.ll,{className:"flex items-center gap-2 text-lg",children:[r.jsx("span",{className:"text-2xl",children:e.emoji}),e.name]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx(x.r,{checked:e.active,onCheckedChange:()=>I(e.id)})})]}),r.jsx(c.SZ,{children:e.description||"No description"})]}),(0,r.jsxs)(c.aY,{className:"space-y-3",children:[r.jsx("div",{className:"flex flex-wrap gap-1",children:e.supportRoles.length>0?e.supportRoles.map(e=>{let s=A?.find(s=>s.id===e);return r.jsx(p.C,{variant:"secondary",children:s?.name||e},e)}):r.jsx("span",{className:"text-sm text-muted-foreground",children:"No roles assigned"})}),(0,r.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,r.jsxs)("span",{children:["Max tickets: ",e.maxTickets||"Default"]}),(0,r.jsxs)("span",{children:["Auto-close: ",e.autoCloseHours?`${e.autoCloseHours}h`:"Off"]})]}),(0,r.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,r.jsxs)(o.z,{size:"sm",variant:"outline",onClick:()=>D(e),children:[r.jsx(f,{className:"mr-2 h-3 w-3"}),"Edit"]}),(0,r.jsxs)(o.z,{size:"sm",variant:"outline",className:"text-destructive",onClick:()=>E(e.id),children:[r.jsx(N.Z,{className:"mr-2 h-3 w-3"}),"Delete"]})]})]})]},e.id)),0===t.length&&r.jsx(c.Zb,{className:"md:col-span-2 lg:col-span-3",children:(0,r.jsxs)(c.aY,{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(C.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No categories configured"}),(0,r.jsxs)(o.z,{className:"mt-4",onClick:S,children:[r.jsx(v.Z,{className:"mr-2 h-4 w-4"}),"Create Your First Category"]})]})})]}),r.jsx(h.Vq,{open:w,onOpenChange:P,children:(0,r.jsxs)(h.cZ,{children:[(0,r.jsxs)(h.fK,{children:[r.jsx(h.$N,{children:q?.id?.startsWith("cat_")?"Add Category":"Edit Category"}),r.jsx(h.Be,{children:"Configure the ticket category settings"})]}),q&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(u._,{children:"Emoji"}),r.jsx(d.I,{value:q.emoji,onChange:e=>_({...q,emoji:e.target.value}),placeholder:"\uD83C\uDFAB",className:"text-center text-xl"})]}),(0,r.jsxs)("div",{className:"col-span-3 space-y-2",children:[r.jsx(u._,{children:"Name"}),r.jsx(d.I,{value:q.name,onChange:e=>_({...q,name:e.target.value}),placeholder:"General Support"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(u._,{children:"Description"}),r.jsx(d.I,{value:q.description,onChange:e=>_({...q,description:e.target.value}),placeholder:"Get help with general questions"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(u._,{children:"Max Tickets per User"}),r.jsx(d.I,{type:"number",value:q.maxTickets||"",onChange:e=>_({...q,maxTickets:parseInt(e.target.value)||void 0}),placeholder:"1"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(u._,{children:"Auto-close (hours)"}),r.jsx(d.I,{type:"number",value:q.autoCloseHours||"",onChange:e=>_({...q,autoCloseHours:parseInt(e.target.value)||void 0}),placeholder:"0 (disabled)"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(x.r,{checked:q.active,onCheckedChange:e=>_({...q,active:e})}),r.jsx(u._,{children:"Category Active"})]})]}),(0,r.jsxs)(h.cN,{children:[r.jsx(o.z,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),r.jsx(o.z,{onClick:()=>{if(!q)return;let e=t.findIndex(e=>e.id===q.id);if(e>=0){let s=[...t];s[e]=q,b(s)}else b([...t,q]);P(!1),_(null)},children:"Save Category"})]})]})})]}):r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("p",{className:"text-muted-foreground",children:"Please select a server"})})}},3855:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(2881).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8091:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(2881).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},6260:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`/home/runner/workspace/dashboard/app/dashboard/categories/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,217,152,335,417,649,757],()=>t(8762));module.exports=r})();