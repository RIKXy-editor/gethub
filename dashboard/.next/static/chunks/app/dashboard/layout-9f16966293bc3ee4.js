(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[663],{7607:function(e,a,t){Promise.resolve().then(t.bind(t,85982))},85982:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return _}});var n=t(57437),s=t(2265),r=t(99376),i=t(11713),d=t(27648),c=t(94508),o=t(25466),l=t(95080),u=t(72051),f=t(88906),m=t(98728),h=t(48736),p=t(86595),g=t(95805),x=t(43044),b=t(85929),y=t(97226),v=t(47692),w=t(25922),j=t(62869),N=t(29116);let k=[{name:"Overview",href:"/dashboard",icon:o.Z},{name:"Panel Builder",href:"/dashboard/panels",icon:l.Z},{name:"Categories",href:"/dashboard/categories",icon:u.Z},{name:"Ban Appeals",href:"/dashboard/appeals",icon:f.Z},{name:"Settings",href:"/dashboard/settings",icon:m.Z},{name:"Transcripts",href:"/dashboard/transcripts",icon:h.Z},{name:"Ratings",href:"/dashboard/ratings",icon:p.Z},{name:"Staff",href:"/dashboard/staff",icon:g.Z},{name:"Audit Logs",href:"/dashboard/logs",icon:x.Z}];function Z(){let e=(0,r.usePathname)(),a=(0,r.useRouter)(),{theme:t,setTheme:s}=(0,w.F)(),i=async()=>{await N.x.logout(),a.push("/")};return(0,n.jsxs)("div",{className:"flex h-full w-64 flex-col bg-card border-r",children:[(0,n.jsx)("div",{className:"flex h-16 items-center border-b px-6",children:(0,n.jsxs)(d.default,{href:"/dashboard",className:"flex items-center gap-2",children:[(0,n.jsx)(l.Z,{className:"h-6 w-6 text-primary"}),(0,n.jsx)("span",{className:"text-lg font-bold",children:"Ticket Dashboard"})]})}),(0,n.jsx)("nav",{className:"flex-1 space-y-1 px-3 py-4",children:k.map(a=>{let t=e===a.href;return(0,n.jsxs)(d.default,{href:a.href,className:(0,c.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors",t?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[(0,n.jsx)(a.icon,{className:"h-5 w-5"}),a.name]},a.name)})}),(0,n.jsxs)("div",{className:"border-t p-4 space-y-2",children:[(0,n.jsxs)(j.z,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:()=>s("dark"===t?"light":"dark"),children:["dark"===t?(0,n.jsx)(b.Z,{className:"mr-2 h-4 w-4"}):(0,n.jsx)(y.Z,{className:"mr-2 h-4 w-4"}),"dark"===t?"Light Mode":"Dark Mode"]}),(0,n.jsxs)(j.z,{variant:"ghost",size:"sm",className:"w-full justify-start text-destructive",onClick:i,children:[(0,n.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})}var C=t(53647),z=t(42097),P=t(93022);function R(){let{selectedGuildId:e,setSelectedGuildId:a}=(0,z.f)(),{data:t,isLoading:s}=(0,i.a)({queryKey:["guilds"],queryFn:()=>N.x.getGuilds()});return(0,n.jsxs)("header",{className:"flex h-16 items-center justify-between border-b bg-card px-6",children:[(0,n.jsx)("div",{className:"flex items-center gap-4",children:(0,n.jsx)("h1",{className:"text-xl font-semibold",children:"Dashboard"})}),(0,n.jsx)("div",{className:"flex items-center gap-4",children:s?(0,n.jsx)(P.O,{className:"h-10 w-48"}):(0,n.jsxs)(C.Ph,{value:e,onValueChange:a,children:[(0,n.jsx)(C.i4,{className:"w-48",children:(0,n.jsx)(C.ki,{placeholder:"Select server"})}),(0,n.jsx)(C.Bw,{children:null==t?void 0:t.map(e=>(0,n.jsx)(C.Ql,{value:e.id,children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[e.icon?(0,n.jsx)("img",{src:e.icon,alt:"",className:"h-5 w-5 rounded-full"}):(0,n.jsx)("div",{className:"h-5 w-5 rounded-full bg-muted"}),e.name]})},e.id))})]})})]})}function _(e){let{children:a}=e,t=(0,r.useRouter)(),{selectedGuildId:d,setSelectedGuildId:c}=(0,z.f)(),{data:o,isLoading:l}=(0,i.a)({queryKey:["auth"],queryFn:()=>N.x.checkAuth()}),{data:u}=(0,i.a)({queryKey:["guilds"],queryFn:()=>N.x.getGuilds(),enabled:null==o?void 0:o.authenticated});return((0,s.useEffect)(()=>{l||(null==o?void 0:o.authenticated)||t.push("/")},[o,l,t]),(0,s.useEffect)(()=>{u&&u.length>0&&!d&&c(u[0].id)},[u,d,c]),l)?(0,n.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(null==o?void 0:o.authenticated)?(0,n.jsxs)("div",{className:"flex h-screen",children:[(0,n.jsx)(Z,{}),(0,n.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden",children:[(0,n.jsx)(R,{}),(0,n.jsx)("main",{className:"flex-1 overflow-y-auto bg-muted/30 p-6",children:a})]})]}):null}},62869:function(e,a,t){"use strict";t.d(a,{z:function(){return o}});var n=t(57437),s=t(2265),r=t(37053),i=t(90535),d=t(94508);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,a)=>{let{className:t,variant:s,size:i,asChild:o=!1,...l}=e,u=o?r.g7:"button";return(0,n.jsx)(u,{className:(0,d.cn)(c({variant:s,size:i,className:t})),ref:a,...l})});o.displayName="Button"},53647:function(e,a,t){"use strict";t.d(a,{Bw:function(){return f},Ph:function(){return o},Ql:function(){return m},i4:function(){return u},ki:function(){return l}});var n=t(57437),s=t(2265),r=t(16112),i=t(40875),d=t(30401),c=t(94508);let o=r.fC;r.ZA;let l=r.B4,u=s.forwardRef((e,a)=>{let{className:t,children:s,...d}=e;return(0,n.jsxs)(r.xz,{ref:a,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...d,children:[s,(0,n.jsx)(r.JO,{asChild:!0,children:(0,n.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=r.xz.displayName;let f=s.forwardRef((e,a)=>{let{className:t,children:s,position:i="popper",...d}=e;return(0,n.jsx)(r.h_,{children:(0,n.jsx)(r.VY,{ref:a,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...d,children:(0,n.jsx)(r.l_,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s})})})});f.displayName=r.VY.displayName;let m=s.forwardRef((e,a)=>{let{className:t,children:s,...i}=e;return(0,n.jsxs)(r.ck,{ref:a,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(r.wU,{children:(0,n.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,n.jsx)(r.eT,{children:s})]})});m.displayName=r.ck.displayName},93022:function(e,a,t){"use strict";t.d(a,{O:function(){return r}});var n=t(57437),s=t(94508);function r(e){let{className:a,...t}=e;return(0,n.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-muted",a),...t})}},29116:function(e,a,t){"use strict";t.d(a,{x:function(){return s}});let n=t(83464).Z.create({baseURL:"https://5298c165-ac5e-4b78-885d-30d78914b3b6-00-2vs63sqy2cwxv.kirk.replit.dev",withCredentials:!0}),s={login:async e=>(await n.post("/admin/login",{password:e})).data,async logout(){await n.post("/admin/logout")},async checkAuth(){try{return(await n.get("/admin/check-auth")).data}catch(e){return{authenticated:!1}}},getGuilds:async()=>(await n.get("/admin/api/discord/guilds")).data,getConfig:async e=>(await n.get("/admin/api/config/".concat(e))).data,async updateConfig(e,a){await n.put("/admin/api/config/".concat(e),a)},getPlans:async e=>(await n.get("/admin/api/plans/".concat(e))).data,async updatePlans(e,a){await n.put("/admin/api/plans/".concat(e),{plans:a})},getPayments:async e=>(await n.get("/admin/api/payments/".concat(e))).data,async updatePayments(e,a){await n.put("/admin/api/payments/".concat(e),{methods:a})},async publishPanel(e,a){await n.post("/admin/api/panels/".concat(e,"/post"),{channelId:a})},getStats:async e=>(await n.get("/admin/api/stats/".concat(e))).data,getLogs:async(e,a)=>(await n.get("/admin/api/logs/".concat(e),{params:a})).data,getCategories:async e=>(await n.get("/admin/api/categories/".concat(e))).data,async updateCategories(e,a){await n.put("/admin/api/categories/".concat(e),{categories:a})},getStaff:async e=>(await n.get("/admin/api/staff/".concat(e))).data,async updateStaff(e,a,t){await n.put("/admin/api/staff/".concat(e,"/").concat(a),t)},getChannels:async e=>(await n.get("/admin/api/discord/guilds/".concat(e,"/channels"))).data,getRoles:async e=>(await n.get("/admin/api/discord/guilds/".concat(e,"/roles"))).data}},42097:function(e,a,t){"use strict";t.d(a,{f:function(){return r}});var n=t(3011),s=t(89134);let r=(0,n.U)()((0,s.tJ)(e=>({selectedGuildId:"",setSelectedGuildId:a=>e({selectedGuildId:a})}),{name:"guild-storage"}))},94508:function(e,a,t){"use strict";t.d(a,{cn:function(){return r}});var n=t(61994),s=t(53335);function r(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,s.m6)((0,n.W)(a))}}},function(e){e.O(0,[590,464,763,753,561,553,634,916,229,971,117,744],function(){return e(e.s=7607)}),_N_E=e.O()}]);