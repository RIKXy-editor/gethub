(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[777],{52222:function(e,t,s){Promise.resolve().then(s.bind(s,78541))},78541:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return _}});var i=s(57437),a=s(2265),r=s(29827),n=s(11713),l=s(21770),c=s(66070),o=s(62869),h=s(95186),u=s(26815),d=s(76818),m=s(12339),p=s(53647),x=s(93022),v=s(35974),j=s(29116),y=s(42097),f=s(35153),g=s(83229),b=s(53417),N=s(79205);let C=(0,N.Z)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),k=(0,N.Z)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),w=(0,N.Z)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]),D=(0,N.Z)("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),P=(0,N.Z)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var S=s(99397),M=s(18930),O=s(44743);let E=(0,N.Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),R=["\uD83C\uDFAB","✨","\uD83D\uDC8E","\uD83C\uDF81","\uD83D\uDCCC","\uD83D\uDD25","⭐","\uD83D\uDCB0","\uD83C\uDFAF","\uD83D\uDE80","\uD83D\uDCBC","\uD83D\uDCE2","✅","❌","⚠️","\uD83D\uDCB3"],Z=["Primary","Success","Danger","Secondary"];function _(){let{selectedGuildId:e}=(0,y.f)(),t=(0,r.NL)(),[s,N]=(0,a.useState)({title:"\uD83C\uDFAB Support Tickets",description:"Click the button below to create a support ticket.",color:"#dc2626",image:"",thumbnail:"",footer:""}),[_,z]=(0,a.useState)("Open Ticket"),[F,I]=(0,a.useState)("Primary"),[B,A]=(0,a.useState)([]),[T,U]=(0,a.useState)(""),{data:K,isLoading:L}=(0,n.a)({queryKey:["config",e],queryFn:()=>j.x.getConfig(e),enabled:!!e}),{data:V}=(0,n.a)({queryKey:["channels",e],queryFn:()=>j.x.getChannels(e),enabled:!!e}),{data:q}=(0,n.a)({queryKey:["plans",e],queryFn:()=>j.x.getPlans(e),enabled:!!e});(0,a.useEffect)(()=>{if(K){var e,t,s,i,a,r;N({title:(null===(e=K.panelEmbed)||void 0===e?void 0:e.title)||"\uD83C\uDFAB Support Tickets",description:(null===(t=K.panelEmbed)||void 0===t?void 0:t.description)||"Click the button below to create a support ticket.",color:(null===(s=K.panelEmbed)||void 0===s?void 0:s.color)||"#dc2626",image:(null===(i=K.panelEmbed)||void 0===i?void 0:i.image)||"",thumbnail:(null===(a=K.panelEmbed)||void 0===a?void 0:a.thumbnail)||"",footer:(null===(r=K.panelEmbed)||void 0===r?void 0:r.footer)||""}),z(K.buttonLabel||"Open Ticket"),I(K.buttonColor||"Primary")}},[K]),(0,a.useEffect)(()=>{q&&A(q)},[q]);let Y=(0,l.D)({mutationFn:async()=>{await j.x.updateConfig(e,{panelEmbed:s,buttonLabel:_,buttonColor:F}),await j.x.updatePlans(e,B)},onSuccess:()=>{(0,f.Am)({title:"Success",description:"Panel settings saved!"}),t.invalidateQueries({queryKey:["config",e]})},onError:()=>{(0,f.Am)({title:"Error",description:"Failed to save settings",variant:"destructive"})}}),G=(0,l.D)({mutationFn:()=>j.x.publishPanel(e,T),onSuccess:()=>{(0,f.Am)({title:"Success",description:"Panel published to Discord!"})},onError:()=>{(0,f.Am)({title:"Error",description:"Failed to publish panel",variant:"destructive"})}}),Q=e=>{N(t=>({...t,description:t.description+e}))},H=e=>{let t={bold:{prefix:"**",suffix:"**"},italic:{prefix:"*",suffix:"*"},underline:{prefix:"__",suffix:"__"},strikethrough:{prefix:"~~",suffix:"~~"}}[e];t&&N(e=>({...e,description:e.description+t.prefix+"text"+t.suffix}))},$=(e,t,s)=>{let i=[...B];"features"===t?i[e].features=s.split(",").map(e=>e.trim()):i[e][t]=s,A(i)},J=e=>{A(B.filter((t,s)=>s!==e))};return e?L?(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)(x.O,{className:"h-8 w-48"}),(0,i.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,i.jsx)(x.O,{className:"h-96"}),(0,i.jsx)(x.O,{className:"h-96"})]})]}):(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Panel Builder"}),(0,i.jsx)("p",{className:"text-muted-foreground",children:"Design your ticket panel with live preview"})]}),(0,i.jsx)("div",{className:"flex gap-2",children:(0,i.jsxs)(o.z,{onClick:()=>Y.mutate(),disabled:Y.isPending,children:[(0,i.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]}),(0,i.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)(m.mQ,{defaultValue:"embed",className:"w-full",children:[(0,i.jsxs)(m.dr,{className:"grid w-full grid-cols-3",children:[(0,i.jsxs)(m.SP,{value:"embed",children:[(0,i.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),"Embed"]}),(0,i.jsxs)(m.SP,{value:"button",children:[(0,i.jsx)(C,{className:"mr-2 h-4 w-4"}),"Button"]}),(0,i.jsxs)(m.SP,{value:"plans",children:[(0,i.jsx)(k,{className:"mr-2 h-4 w-4"}),"Plans"]})]}),(0,i.jsx)(m.nU,{value:"embed",className:"space-y-4",children:(0,i.jsxs)(c.Zb,{children:[(0,i.jsx)(c.Ol,{children:(0,i.jsxs)(c.ll,{className:"flex items-center gap-2",children:[(0,i.jsx)(w,{className:"h-5 w-5"}),"Panel Embed"]})}),(0,i.jsxs)(c.aY,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u._,{children:"Title"}),(0,i.jsx)(h.I,{value:s.title,onChange:e=>N({...s,title:e.target.value}),placeholder:"\uD83C\uDFAB Support Tickets"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u._,{children:"Description"}),(0,i.jsx)("div",{className:"flex flex-wrap gap-1 mb-2",children:R.map(e=>(0,i.jsx)("button",{type:"button",onClick:()=>Q(e),className:"p-1 hover:bg-muted rounded text-lg",children:e},e))}),(0,i.jsxs)("div",{className:"flex gap-1 mb-2",children:[(0,i.jsx)(o.z,{size:"sm",variant:"outline",onClick:()=>H("bold"),children:(0,i.jsx)("strong",{children:"B"})}),(0,i.jsx)(o.z,{size:"sm",variant:"outline",onClick:()=>H("italic"),children:(0,i.jsx)("em",{children:"I"})}),(0,i.jsx)(o.z,{size:"sm",variant:"outline",onClick:()=>H("underline"),children:(0,i.jsx)("u",{children:"U"})}),(0,i.jsx)(o.z,{size:"sm",variant:"outline",onClick:()=>H("strikethrough"),children:(0,i.jsx)("s",{children:"S"})})]}),(0,i.jsx)(d.g,{value:s.description,onChange:e=>N({...s,description:e.target.value}),placeholder:"Click the button below to create a ticket",rows:4})]}),(0,i.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)(u._,{className:"flex items-center gap-2",children:[(0,i.jsx)(D,{className:"h-4 w-4"}),"Color"]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(h.I,{type:"color",value:s.color,onChange:e=>N({...s,color:e.target.value}),className:"w-12 h-10 p-1"}),(0,i.jsx)(h.I,{value:s.color,onChange:e=>N({...s,color:e.target.value}),placeholder:"#dc2626"})]})]})}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)(u._,{className:"flex items-center gap-2",children:[(0,i.jsx)(P,{className:"h-4 w-4"}),"Image URL"]}),(0,i.jsx)(h.I,{value:s.image,onChange:e=>N({...s,image:e.target.value}),placeholder:"https://example.com/image.png"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u._,{children:"Thumbnail URL"}),(0,i.jsx)(h.I,{value:s.thumbnail,onChange:e=>N({...s,thumbnail:e.target.value}),placeholder:"https://example.com/thumbnail.png"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u._,{children:"Footer"}),(0,i.jsx)(h.I,{value:s.footer,onChange:e=>N({...s,footer:e.target.value}),placeholder:"Editors Club Support"})]})]})]})}),(0,i.jsx)(m.nU,{value:"button",className:"space-y-4",children:(0,i.jsxs)(c.Zb,{children:[(0,i.jsx)(c.Ol,{children:(0,i.jsx)(c.ll,{children:"Button Settings"})}),(0,i.jsxs)(c.aY,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u._,{children:"Button Label"}),(0,i.jsx)(h.I,{value:_,onChange:e=>z(e.target.value),placeholder:"Open Ticket"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u._,{children:"Button Color"}),(0,i.jsxs)(p.Ph,{value:F,onValueChange:I,children:[(0,i.jsx)(p.i4,{children:(0,i.jsx)(p.ki,{})}),(0,i.jsx)(p.Bw,{children:Z.map(e=>(0,i.jsx)(p.Ql,{value:e,children:e},e))})]})]})]})]})}),(0,i.jsx)(m.nU,{value:"plans",className:"space-y-4",children:(0,i.jsxs)(c.Zb,{children:[(0,i.jsx)(c.Ol,{children:(0,i.jsxs)(c.ll,{className:"flex items-center justify-between",children:[(0,i.jsx)("span",{children:"Subscription Plans"}),(0,i.jsxs)(o.z,{size:"sm",onClick:()=>{A([...B,{name:"",priceINR:"",priceUSD:"",features:[]}])},children:[(0,i.jsx)(S.Z,{className:"mr-2 h-4 w-4"}),"Add Plan"]})]})}),(0,i.jsx)(c.aY,{className:"space-y-4",children:0===B.length?(0,i.jsx)("p",{className:"text-center text-muted-foreground py-4",children:'No plans configured. Click "Add Plan" to create one.'}):B.map((e,t)=>(0,i.jsxs)("div",{className:"border rounded-lg p-4 space-y-3",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)(v.C,{children:["Plan ",t+1]}),(0,i.jsx)(o.z,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>J(t),children:(0,i.jsx)(M.Z,{className:"h-4 w-4"})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(u._,{className:"text-xs",children:"Name"}),(0,i.jsx)(h.I,{value:e.name,onChange:e=>$(t,"name",e.target.value),placeholder:"1 Month"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(u._,{className:"text-xs",children:"INR Price"}),(0,i.jsx)(h.I,{value:e.priceINR,onChange:e=>$(t,"priceINR",e.target.value),placeholder:"₹595"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(u._,{className:"text-xs",children:"USD Price"}),(0,i.jsx)(h.I,{value:e.priceUSD,onChange:e=>$(t,"priceUSD",e.target.value),placeholder:"$8"})]})]})]},t))})]})})]}),(0,i.jsxs)(c.Zb,{children:[(0,i.jsxs)(c.Ol,{children:[(0,i.jsxs)(c.ll,{className:"flex items-center gap-2",children:[(0,i.jsx)(O.Z,{className:"h-5 w-5"}),"Publish Panel"]}),(0,i.jsx)(c.SZ,{children:"Send the panel to a Discord channel"})]}),(0,i.jsxs)(c.aY,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u._,{children:"Select Channel"}),(0,i.jsxs)(p.Ph,{value:T,onValueChange:U,children:[(0,i.jsx)(p.i4,{children:(0,i.jsx)(p.ki,{placeholder:"Choose a channel"})}),(0,i.jsx)(p.Bw,{children:null==V?void 0:V.map(e=>(0,i.jsxs)(p.Ql,{value:e.id,children:["# ",e.name]},e.id))})]})]}),(0,i.jsxs)(o.z,{className:"w-full",onClick:()=>G.mutate(),disabled:!T||G.isPending,children:[(0,i.jsx)(O.Z,{className:"mr-2 h-4 w-4"}),"Publish to Discord"]})]})]})]}),(0,i.jsx)("div",{className:"lg:sticky lg:top-6",children:(0,i.jsxs)(c.Zb,{children:[(0,i.jsxs)(c.Ol,{children:[(0,i.jsxs)(c.ll,{className:"flex items-center gap-2",children:[(0,i.jsx)(E,{className:"h-5 w-5"}),"Live Preview"]}),(0,i.jsx)(c.SZ,{children:"This is how your panel will appear in Discord"})]}),(0,i.jsx)(c.aY,{children:(0,i.jsx)("div",{className:"bg-[#36393f] rounded-lg p-4 text-white",children:(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("div",{className:"w-10 h-10 rounded-full bg-[#5865f2] flex items-center justify-center text-sm font-bold",children:"EC"}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,i.jsx)("span",{className:"font-semibold",children:"Editors Club"}),(0,i.jsx)(v.C,{variant:"secondary",className:"text-xs",children:"BOT"})]}),(0,i.jsx)("div",{className:"rounded-lg overflow-hidden",style:{borderLeft:"4px solid ".concat(s.color)},children:(0,i.jsxs)("div",{className:"bg-[#2f3136] p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-white mb-2",children:s.title}),(0,i.jsx)("p",{className:"text-gray-300 text-sm whitespace-pre-wrap",children:s.description}),s.image&&(0,i.jsx)("img",{src:s.image,alt:"Panel",className:"mt-3 rounded max-w-full",onError:e=>e.currentTarget.style.display="none"}),s.footer&&(0,i.jsx)("p",{className:"text-gray-400 text-xs mt-3",children:s.footer})]})}),(0,i.jsxs)("button",{className:"mt-3 px-4 py-2 rounded text-sm font-medium text-white ".concat((()=>{let e={Primary:"bg-blue-600 hover:bg-blue-700",Success:"bg-green-600 hover:bg-green-700",Danger:"bg-red-600 hover:bg-red-700",Secondary:"bg-gray-600 hover:bg-gray-700"};return e[F]||e.Primary})()),children:["\uD83C\uDFAB ",_]})]})]})})})]})})]})]}):(0,i.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,i.jsx)("p",{className:"text-muted-foreground",children:"Please select a server"})})}},99397:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});let i=(0,s(79205).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},18930:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});let i=(0,s(79205).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},2894:function(e,t,s){"use strict";s.d(t,{R:function(){return l},m:function(){return n}});var i=s(18238),a=s(7989),r=s(11255),n=class extends a.F{#e;#t;#s;#i;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#s=e.mutationCache,this.#t=[],this.state=e.state||l(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||("pending"===this.state.status?this.scheduleGc():this.#s.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(e){let t=()=>{this.#a({type:"continue"})},s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=(0,r.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{this.#a({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#a({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#s.canRun(this)});let i="pending"===this.state.status,a=!this.#i.canStart();try{if(i)t();else{this.#a({type:"pending",variables:e,isPaused:a}),await this.#s.config.onMutate?.(e,this,s);let t=await this.options.onMutate?.(e,s);t!==this.state.context&&this.#a({type:"pending",context:t,variables:e,isPaused:a})}let r=await this.#i.start();return await this.#s.config.onSuccess?.(r,e,this.state.context,this,s),await this.options.onSuccess?.(r,e,this.state.context,s),await this.#s.config.onSettled?.(r,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(r,null,e,this.state.context,s),this.#a({type:"success",data:r}),r}catch(t){try{await this.#s.config.onError?.(t,e,this.state.context,this,s)}catch(e){Promise.reject(e)}try{await this.options.onError?.(t,e,this.state.context,s)}catch(e){Promise.reject(e)}try{await this.#s.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this,s)}catch(e){Promise.reject(e)}try{await this.options.onSettled?.(void 0,t,e,this.state.context,s)}catch(e){Promise.reject(e)}throw this.#a({type:"error",error:t}),t}finally{this.#s.runNext(this)}}#a(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),i.Vr.batch(()=>{this.#t.forEach(t=>{t.onMutationUpdate(e)}),this.#s.notify({mutation:this,type:"updated",action:e})})}};function l(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},21770:function(e,t,s){"use strict";s.d(t,{D:function(){return h}});var i=s(2265),a=s(2894),r=s(18238),n=s(24112),l=s(45345),c=class extends n.l{#e;#r=void 0;#n;#l;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#c()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,l.VS)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,l.Ym)(t.mutationKey)!==(0,l.Ym)(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#c(),this.#o(e)}getCurrentResult(){return this.#r}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#c(),this.#o()}mutate(e,t){return this.#l=t,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#c(){let e=this.#n?.state??(0,a.R)();this.#r={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#o(e){r.Vr.batch(()=>{if(this.#l&&this.hasListeners()){let t=this.#r.variables,s=this.#r.context,i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#l.onSuccess?.(e.data,t,s,i)}catch(e){Promise.reject(e)}try{this.#l.onSettled?.(e.data,null,t,s,i)}catch(e){Promise.reject(e)}}else if(e?.type==="error"){try{this.#l.onError?.(e.error,t,s,i)}catch(e){Promise.reject(e)}try{this.#l.onSettled?.(void 0,e.error,t,s,i)}catch(e){Promise.reject(e)}}}this.listeners.forEach(e=>{e(this.#r)})})}},o=s(29827);function h(e,t){let s=(0,o.NL)(t),[a]=i.useState(()=>new c(s,e));i.useEffect(()=>{a.setOptions(e)},[a,e]);let n=i.useSyncExternalStore(i.useCallback(e=>a.subscribe(r.Vr.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),h=i.useCallback((e,t)=>{a.mutate(e,t).catch(l.ZT)},[a]);if(n.error&&(0,l.L3)(a.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:h,mutateAsync:n.mutate}}}},function(e){e.O(0,[590,464,763,753,561,553,634,916,456,821,971,117,744],function(){return e(e.s=52222)}),_N_E=e.O()}]);