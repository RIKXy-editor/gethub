(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[481],{8655:function(e,t,a){Promise.resolve().then(a.bind(a,8947))},8947:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var n=a(57437),r=a(2265),s=a(11713),i=a(66070),d=a(62869),c=a(95186),l=a(35974),o=a(53647),u=a(93022),f=a(29116),m=a(42097),p=a(92735),g=a(43044),h=a(73247);let x=(0,a(79205).Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var y=a(91723);let v={ticket_created:"bg-green-500",ticket_claimed:"bg-blue-500",ticket_closed:"bg-red-500",ticket_reopened:"bg-yellow-500",config_updated:"bg-purple-500",panel_published:"bg-cyan-500"},b={ticket_created:"Created",ticket_claimed:"Claimed",ticket_closed:"Closed",ticket_reopened:"Reopened",config_updated:"Config",panel_published:"Published"};function j(){let{selectedGuildId:e}=(0,m.f)(),[t,a]=(0,r.useState)(""),[j,w]=(0,r.useState)("all"),{data:N,isLoading:k}=(0,s.a)({queryKey:["logs",e,j],queryFn:()=>f.x.getLogs(e,{action:"all"!==j?j:void 0,limit:100}),enabled:!!e}),C=(N||[]).filter(e=>e.username.toLowerCase().includes(t.toLowerCase())||e.details.toLowerCase().includes(t.toLowerCase()));return e?(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Audit Logs"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"View activity and configuration changes"})]}),(0,n.jsxs)(d.z,{onClick:()=>{if(!C.length)return;let e=new Blob([[["Timestamp","Action","User","Details"],...C.map(e=>[new Date(e.timestamp).toLocaleString(),e.action,e.username,e.details])].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="audit-logs-".concat(new Date().toISOString().split("T")[0],".csv"),a.click()},disabled:!C.length,children:[(0,n.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),"Export CSV"]})]}),(0,n.jsxs)(i.Zb,{children:[(0,n.jsxs)(i.Ol,{children:[(0,n.jsxs)(i.ll,{className:"flex items-center gap-2",children:[(0,n.jsx)(g.Z,{className:"h-5 w-5"}),"Activity Log"]}),(0,n.jsx)(i.SZ,{children:"Recent actions and events"})]}),(0,n.jsxs)(i.aY,{children:[(0,n.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,n.jsxs)("div",{className:"relative flex-1",children:[(0,n.jsx)(h.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,n.jsx)(c.I,{placeholder:"Search logs...",value:t,onChange:e=>a(e.target.value),className:"pl-10"})]}),(0,n.jsxs)(o.Ph,{value:j,onValueChange:w,children:[(0,n.jsxs)(o.i4,{className:"w-48",children:[(0,n.jsx)(x,{className:"mr-2 h-4 w-4"}),(0,n.jsx)(o.ki,{placeholder:"Filter by action"})]}),(0,n.jsxs)(o.Bw,{children:[(0,n.jsx)(o.Ql,{value:"all",children:"All Actions"}),(0,n.jsx)(o.Ql,{value:"ticket_created",children:"Ticket Created"}),(0,n.jsx)(o.Ql,{value:"ticket_claimed",children:"Ticket Claimed"}),(0,n.jsx)(o.Ql,{value:"ticket_closed",children:"Ticket Closed"}),(0,n.jsx)(o.Ql,{value:"ticket_reopened",children:"Ticket Reopened"}),(0,n.jsx)(o.Ql,{value:"config_updated",children:"Config Updated"}),(0,n.jsx)(o.Ql,{value:"panel_published",children:"Panel Published"})]})]})]}),k?(0,n.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,n.jsx)(u.O,{className:"h-16"},t))}):C.length>0?(0,n.jsx)("div",{className:"space-y-2",children:C.map(e=>(0,n.jsxs)("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-muted/50 hover:bg-muted transition-colors",children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(v[e.action]||"bg-gray-500")}),(0,n.jsx)(l.C,{variant:"outline",className:"min-w-20 justify-center",children:b[e.action]||e.action}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("p",{className:"font-medium",children:e.username}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:e.details})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,n.jsx)(y.Z,{className:"h-4 w-4"}),new Date(e.timestamp).toLocaleString()]})]},e.id))}):(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)(g.Z,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"No logs found"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Activity will be recorded as actions are performed"})]})]})]})]}):(0,n.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,n.jsx)("p",{className:"text-muted-foreground",children:"Please select a server"})})}},35974:function(e,t,a){"use strict";a.d(t,{C:function(){return d}});var n=a(57437);a(2265);var r=a(90535),s=a(94508);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:a,...r}=e;return(0,n.jsx)("div",{className:(0,s.cn)(i({variant:a}),t),...r})}},62869:function(e,t,a){"use strict";a.d(t,{z:function(){return l}});var n=a(57437),r=a(2265),s=a(37053),i=a(90535),d=a(94508);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,asChild:l=!1,...o}=e,u=l?s.g7:"button";return(0,n.jsx)(u,{className:(0,d.cn)(c({variant:r,size:i,className:a})),ref:t,...o})});l.displayName="Button"},66070:function(e,t,a){"use strict";a.d(t,{Ol:function(){return d},SZ:function(){return l},Zb:function(){return i},aY:function(){return o},ll:function(){return c}});var n=a(57437),r=a(2265),s=a(94508);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});i.displayName="Card";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",a),...r})});d.displayName="CardHeader";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});c.displayName="CardTitle";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...r})});l.displayName="CardDescription";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",a),...r})});o.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},95186:function(e,t,a){"use strict";a.d(t,{I:function(){return i}});var n=a(57437),r=a(2265),s=a(94508);let i=r.forwardRef((e,t)=>{let{className:a,type:r,...i}=e;return(0,n.jsx)("input",{type:r,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...i})});i.displayName="Input"},53647:function(e,t,a){"use strict";a.d(t,{Bw:function(){return f},Ph:function(){return l},Ql:function(){return m},i4:function(){return u},ki:function(){return o}});var n=a(57437),r=a(2265),s=a(16112),i=a(40875),d=a(30401),c=a(94508);let l=s.fC;s.ZA;let o=s.B4,u=r.forwardRef((e,t)=>{let{className:a,children:r,...d}=e;return(0,n.jsxs)(s.xz,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...d,children:[r,(0,n.jsx)(s.JO,{asChild:!0,children:(0,n.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=s.xz.displayName;let f=r.forwardRef((e,t)=>{let{className:a,children:r,position:i="popper",...d}=e;return(0,n.jsx)(s.h_,{children:(0,n.jsx)(s.VY,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...d,children:(0,n.jsx)(s.l_,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r})})})});f.displayName=s.VY.displayName;let m=r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,n.jsxs)(s.ck,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(s.wU,{children:(0,n.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,n.jsx)(s.eT,{children:r})]})});m.displayName=s.ck.displayName},93022:function(e,t,a){"use strict";a.d(t,{O:function(){return s}});var n=a(57437),r=a(94508);function s(e){let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",t),...a})}},29116:function(e,t,a){"use strict";a.d(t,{x:function(){return r}});let n=a(83464).Z.create({baseURL:"https://5298c165-ac5e-4b78-885d-30d78914b3b6-00-2vs63sqy2cwxv.kirk.replit.dev",withCredentials:!0}),r={login:async e=>(await n.post("/admin/login",{password:e})).data,async logout(){await n.post("/admin/logout")},async checkAuth(){try{return(await n.get("/admin/check-auth")).data}catch(e){return{authenticated:!1}}},getGuilds:async()=>(await n.get("/admin/api/discord/guilds")).data,getConfig:async e=>(await n.get("/admin/api/config/".concat(e))).data,async updateConfig(e,t){await n.put("/admin/api/config/".concat(e),t)},getPlans:async e=>(await n.get("/admin/api/plans/".concat(e))).data,async updatePlans(e,t){await n.put("/admin/api/plans/".concat(e),{plans:t})},getPayments:async e=>(await n.get("/admin/api/payments/".concat(e))).data,async updatePayments(e,t){await n.put("/admin/api/payments/".concat(e),{methods:t})},async publishPanel(e,t){await n.post("/admin/api/panels/".concat(e,"/post"),{channelId:t})},getStats:async e=>(await n.get("/admin/api/stats/".concat(e))).data,getLogs:async(e,t)=>(await n.get("/admin/api/logs/".concat(e),{params:t})).data,getCategories:async e=>(await n.get("/admin/api/categories/".concat(e))).data,async updateCategories(e,t){await n.put("/admin/api/categories/".concat(e),{categories:t})},getStaff:async e=>(await n.get("/admin/api/staff/".concat(e))).data,async updateStaff(e,t,a){await n.put("/admin/api/staff/".concat(e,"/").concat(t),a)},getChannels:async e=>(await n.get("/admin/api/discord/guilds/".concat(e,"/channels"))).data,getRoles:async e=>(await n.get("/admin/api/discord/guilds/".concat(e,"/roles"))).data}},42097:function(e,t,a){"use strict";a.d(t,{f:function(){return s}});var n=a(3011),r=a(89134);let s=(0,n.U)()((0,r.tJ)(e=>({selectedGuildId:"",setSelectedGuildId:t=>e({selectedGuildId:t})}),{name:"guild-storage"}))},94508:function(e,t,a){"use strict";a.d(t,{cn:function(){return s}});var n=a(61994),r=a(53335);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,n.W)(t))}},43044:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(79205).Z)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]])},91723:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(79205).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},92735:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(79205).Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},73247:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(79205).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])}},function(e){e.O(0,[590,464,763,753,561,553,634,916,971,117,744],function(){return e(e.s=8655)}),_N_E=e.O()}]);