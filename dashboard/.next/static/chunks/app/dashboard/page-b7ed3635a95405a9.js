(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{89148:function(e,a,t){Promise.resolve().then(t.bind(t,71720))},71720:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return k}});var s=t(57437),i=t(11713),n=t(66070),r=t(93022),l=t(29116),c=t(42097),d=t(95080),o=t(58847),u=t(27995),m=t(86595),x=t(70525),f=t(95805),h=t(91436),p=t(5481),g=t(56940),j=t(97059),v=t(62994),y=t(77719),N=t(26662),w=t(77031),b=t(88465);function k(){var e;let{selectedGuildId:a}=(0,c.f)(),{data:t,isLoading:k}=(0,i.a)({queryKey:["stats",a],queryFn:()=>l.x.getStats(a),enabled:!!a});if(!a)return(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"Please select a server to view statistics"})});if(k)return(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[void 0,void 0,void 0,void 0].map((e,a)=>(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(r.O,{className:"h-4 w-24"}),(0,s.jsx)(r.O,{className:"h-4 w-4"})]}),(0,s.jsx)(n.aY,{children:(0,s.jsx)(r.O,{className:"h-8 w-16"})})]},a))})});let C=[{title:"Total Tickets",value:(null==t?void 0:t.total)||0,icon:d.Z,color:"text-blue-500"},{title:"Open Tickets",value:(null==t?void 0:t.open)||0,icon:o.Z,color:"text-green-500"},{title:"Closed Tickets",value:(null==t?void 0:t.closed)||0,icon:u.Z,color:"text-red-500"},{title:"Avg Rating",value:(null==t?void 0:null===(e=t.avgRating)||void 0===e?void 0:e.toFixed(1))||"N/A",icon:m.Z,color:"text-yellow-500"}];return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Overview of your ticket system"})]}),(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:C.map(e=>(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(n.ll,{className:"text-sm font-medium",children:e.title}),(0,s.jsx)(e.icon,{className:"h-4 w-4 ".concat(e.color)})]}),(0,s.jsx)(n.aY,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:e.value})})]},e.title))}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{children:[(0,s.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(x.Z,{className:"h-5 w-5"}),"Tickets Per Day"]}),(0,s.jsx)(n.SZ,{children:"Ticket volume over the past week"})]}),(0,s.jsx)(n.aY,{children:(0,s.jsx)("div",{className:"h-64",children:(0,s.jsx)(h.h,{width:"100%",height:"100%",children:(0,s.jsxs)(p.T,{data:(null==t?void 0:t.ticketsPerDay)||[],children:[(0,s.jsx)(g.q,{strokeDasharray:"3 3",className:"stroke-muted"}),(0,s.jsx)(j.K,{dataKey:"date",className:"text-xs"}),(0,s.jsx)(v.B,{className:"text-xs"}),(0,s.jsx)(y.u,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),(0,s.jsx)(N.uN,{type:"monotone",dataKey:"count",stroke:"hsl(var(--primary))",fill:"hsl(var(--primary))",fillOpacity:.2})]})})})})]}),(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{children:[(0,s.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(f.Z,{className:"h-5 w-5"}),"Staff Leaderboard"]}),(0,s.jsx)(n.SZ,{children:"Top performing staff members"})]}),(0,s.jsx)(n.aY,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[((null==t?void 0:t.staffLeaderboard)||[]).slice(0,5).map((e,a)=>{var t;return(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-primary/10 text-sm font-bold",children:a+1}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium",children:e.username}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.claimed," tickets claimed"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4 text-yellow-500"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:(null===(t=e.avgRating)||void 0===t?void 0:t.toFixed(1))||"N/A"})]})]},e.userId)}),(!(null==t?void 0:t.staffLeaderboard)||0===t.staffLeaderboard.length)&&(0,s.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"No staff data available yet"})]})})]})]}),(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{children:[(0,s.jsx)(n.ll,{children:"Top Categories"}),(0,s.jsx)(n.SZ,{children:"Most used ticket categories"})]}),(0,s.jsx)(n.aY,{children:(0,s.jsx)("div",{className:"h-64",children:(0,s.jsx)(h.h,{width:"100%",height:"100%",children:(0,s.jsxs)(w.v,{data:(null==t?void 0:t.topCategories)||[],layout:"vertical",children:[(0,s.jsx)(g.q,{strokeDasharray:"3 3",className:"stroke-muted"}),(0,s.jsx)(j.K,{type:"number",className:"text-xs"}),(0,s.jsx)(v.B,{dataKey:"name",type:"category",width:100,className:"text-xs"}),(0,s.jsx)(y.u,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),(0,s.jsx)(b.$Q,{dataKey:"count",fill:"hsl(var(--primary))",radius:[0,4,4,0]})]})})})})]})]})}},66070:function(e,a,t){"use strict";t.d(a,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return r},aY:function(){return o},ll:function(){return c}});var s=t(57437),i=t(2265),n=t(94508);let r=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...i})});r.displayName="Card";let l=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...i})});l.displayName="CardHeader";let c=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)("h3",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...i})});c.displayName="CardTitle";let d=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)("p",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",t),...i})});d.displayName="CardDescription";let o=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",t),...i})});o.displayName="CardContent",i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",t),...i})}).displayName="CardFooter"},93022:function(e,a,t){"use strict";t.d(a,{O:function(){return n}});var s=t(57437),i=t(94508);function n(e){let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,i.cn)("animate-pulse rounded-md bg-muted",a),...t})}},29116:function(e,a,t){"use strict";t.d(a,{x:function(){return i}});let s=t(83464).Z.create({baseURL:"https://5298c165-ac5e-4b78-885d-30d78914b3b6-00-2vs63sqy2cwxv.kirk.replit.dev",withCredentials:!0}),i={login:async e=>(await s.post("/admin/login",{password:e})).data,async logout(){await s.post("/admin/logout")},async checkAuth(){try{return(await s.get("/admin/check-auth")).data}catch(e){return{authenticated:!1}}},getGuilds:async()=>(await s.get("/admin/api/discord/guilds")).data,getConfig:async e=>(await s.get("/admin/api/config/".concat(e))).data,async updateConfig(e,a){await s.put("/admin/api/config/".concat(e),a)},getPlans:async e=>(await s.get("/admin/api/plans/".concat(e))).data,async updatePlans(e,a){await s.put("/admin/api/plans/".concat(e),{plans:a})},getPayments:async e=>(await s.get("/admin/api/payments/".concat(e))).data,async updatePayments(e,a){await s.put("/admin/api/payments/".concat(e),{methods:a})},async publishPanel(e,a){await s.post("/admin/api/panels/".concat(e,"/post"),{channelId:a})},getStats:async e=>(await s.get("/admin/api/stats/".concat(e))).data,getLogs:async(e,a)=>(await s.get("/admin/api/logs/".concat(e),{params:a})).data,getCategories:async e=>(await s.get("/admin/api/categories/".concat(e))).data,async updateCategories(e,a){await s.put("/admin/api/categories/".concat(e),{categories:a})},getStaff:async e=>(await s.get("/admin/api/staff/".concat(e))).data,async updateStaff(e,a,t){await s.put("/admin/api/staff/".concat(e,"/").concat(a),t)},getChannels:async e=>(await s.get("/admin/api/discord/guilds/".concat(e,"/channels"))).data,getRoles:async e=>(await s.get("/admin/api/discord/guilds/".concat(e,"/roles"))).data}},42097:function(e,a,t){"use strict";t.d(a,{f:function(){return n}});var s=t(3011),i=t(89134);let n=(0,s.U)()((0,i.tJ)(e=>({selectedGuildId:"",setSelectedGuildId:a=>e({selectedGuildId:a})}),{name:"guild-storage"}))},94508:function(e,a,t){"use strict";t.d(a,{cn:function(){return n}});var s=t(61994),i=t(53335);function n(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,i.m6)((0,s.W)(a))}}},function(e){e.O(0,[590,464,763,753,965,971,117,744],function(){return e(e.s=89148)}),_N_E=e.O()}]);